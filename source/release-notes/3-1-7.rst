.. index:: CrafterCMS 3.1.7 Release Notes

----------------
CrafterCMS 3.1.7
----------------

*Released June 3, 2020*

^^^^^^^^^^^^
New Features
^^^^^^^^^^^^

* Added multi-target configuration support for Engine configuration files |br|
  *See* :ref:`engine-multi-target-configurations` *for more information.*
* Built-in database security enhancements |br|
  At startup, when Crafter Studio detects an unsecured database, a secure installation script will be run against the database to secure it.
* Enhanced scripts and templates security |br|
  This addresses the following security advisories: :ref:`cv-2020080101` and :ref:`cv-2020080102`

  * FreeMarker engine security enhancements with service access limits
  * Groovy engine security enhancements
    * Groovy engine service access limits
    * Groovy engine sandboxing

  *See* :ref:`script-sandbox-configuration` *for more information on Groovy Engine sandboxing and* :ref:`access-to-services` *for more information on Groovy and Freemarker Engine service access limits.*
* Added support for proxy system to proxy GraphQL, Engine, NodeJS or other application delivery system |br|
  *See* :ref:`proxy-configuration` *for more information.*
* Added engine API for site status |br|
  *See* :ref:`crafter-engine-api-site-context-status` *for more information.*

^^^^^^^
Updates
^^^^^^^

* The *environment-config.xml* configuration has been removed |br|
  The following tags from the *environment-config.xml* file has been removed and ``staging`` and ``live`` are now used as defaults for the repository branch name for publishing targets:

  .. code-block:: xml
     :caption: *The tags below from "environment-config.xml" no longer exist, "staging" and "live" are now used as default publishing targets*

     <open-sidebar />
     <publishing-targets>
       <target>
         <repo-branch-name />
         <display-label />
       </target>
     </publishing-targets>

  |

  The site URLs from the *environment-config.xml* file has been moved to Site Configuration |br|
  *See* :ref:`site-configuration` *for more information.*
* Updated Engine multi-environment configuration |br|
  *See* :ref:`engine-multi-environment-configurations` *for more information.*
* Upgraded Deployer Spring Boot library to 2.2.6


Lots of other small enhancements and bug fixes :)

For a full list of tickets, please visit: `GitHub 3.1.7 Milestone <https://github.com/craftercms/craftercms/milestone/62?closed=1>`_

.. important::

    Please see :ref:`upgrading-craftercms` for instructions on how to update your CrafterCMS install to 3.1.1 (applies to 3.1.7)

    For Docker/Kuber deployments, see :ref:`upgrading-dockers`

    For Linux installs, the embedded MariaDB upgrade requires the library ``libaio`` which is not installed by default in some Linux distributions.  Please see the section on **Linux Prerequisites** in :ref:`prerequisites` for instructions on how to install the library ``libaio``

    Please see :ref:`upgrade-notes-to-fix-backup-error` for some important notes when updating to CrafterCMS 3.1.7