:is-up-to-date: True

.. _crafter-studio-api-publish-publish-items:

=============
Publish Items
=============

Publish a list of items. This will automatically calculate dependencies, drop items and dependencies from any existing
workflows and add them to a new publish package.

--------------------
Resource Information
--------------------

.. include:: /includes/studio-api-url-prefix.rst

+----------------------------+-------------------------------------------------------------------+
|| HTTP Verb                 || POST                                                             |
+----------------------------+-------------------------------------------------------------------+
|| URL                       || ``/api/1/services/api/1/publish/publish-items.json``             |
+----------------------------+-------------------------------------------------------------------+
|| Response Formats          || ``JSON``                                                         |
+----------------------------+-------------------------------------------------------------------+
|| Required Role             || Site admin, or has publish permission in this site               |
+----------------------------+-------------------------------------------------------------------+

----------
Parameters
----------

+---------------------+-------------+---------------+--------------------------------------------------+
|| Name               || Type       || Required     || Description                                     |
+=====================+=============+===============+==================================================+
|| site_id            || String     || |checkmark|  || Site to use                                     |
+---------------------+-------------+---------------+--------------------------------------------------+
|| environment        || String     || |checkmark|  || Environment to publish to                       |
+---------------------+-------------+---------------+--------------------------------------------------+
|| schedule           || Datetime   ||              || Schedule when to publish                        |
+---------------------+-------------+---------------+--------------------------------------------------+
|| submission_comment || Datetime   ||              || Schedule when to publish                        |
+---------------------+-------------+---------------+--------------------------------------------------+
|| item               || String     || |checkmark|  || Path to the item(s)                             |
+---------------------+-------------+---------------+--------------------------------------------------+

-------
Example
-------

.. code-block:: none

	POST .../api/1/services/api/1/publish/publish-items.json?site_id=mysite

.. code-block:: json
    :linenos:

    {
        "environment" : "live",
        "entities" : [
            {
                "item" : "/path/to/item1.xml",
            },
            {
                "item" : "/path/to/item2.xml",
            }
        ]
    }

--------
Response
--------

.. code-block:: json

  {
    "message" : "OK"
  }

---------
Responses
---------

+---------+----------------------------------------------------------+
|| Status || Response Body                                           |
+=========+==========================================================+
|| 200    || ``{ "message" : "OK" }``                                |
+---------+----------------------------------------------------------+
|| 400    || ``{ "message" : "Invalid parameter(s)" }``              |
+---------+----------------------------------------------------------+
|| 400    || ``{ "message" : "Bad Request" }``                       |
+---------+----------------------------------------------------------+
|| 401    || ``{ "message" : "Unauthorized" }``                      |
+---------+----------------------------------------------------------+
|| 404    || ``{ "message" : "Site not found" }``                    |
+---------+----------------------------------------------------------+
|| 404    || ``{ "message" : "Environment not found" }``             |
+---------+----------------------------------------------------------+
|| 500    || ``{ "message" : "Internal server error.``               |
||        || ``ACTUAL_EXCEPTION" }``                                 |
+---------+----------------------------------------------------------+
