:nosearch:

.. index:: CrafterCMS 4.0.3 Release Notes

----------------
CrafterCMS 4.0.3
----------------

*Released TBD*

This release includes fixes for issues with the release version 4.0.2

^^^^^^^^^^^^
New Features
^^^^^^^^^^^^

* Crafter Studio now uses `zxcvbn <https://github.com/dropbox/zxcvbn>`__ for password strength management |br|
  See `here <https://github.com/craftercms/craftercms/issues/5816>`__ for more information

  For more information on configuring the password requirements, see :ref:`newIa-crafter-studio-configure-password-requirements`

* Added support for adding headers to responses when there are matched configuration patterns in
  the Engine Project Configuration file |br|

  Crafter Engine now supports configuring ``Cache-Control`` headers via the :ref:`newIa-engine-project-configuration` file,
  using the ``headerMappings`` property.  By default, it will follow the cache policies configured, where before, it
  was set to ``no-cache``.

  If you're using a reverse-proxy or a CDN, no changes are required since caching is done by the reverse-proxy/CDN.

  See :ref:`newIa-engine-project-configuration` for more information on configuring response headers

  See `here <https://github.com/craftercms/craftercms/issues/5909>`__ for more information

^^^^^^^
Updates
^^^^^^^

* Updated Studio and Engine SAML to use the new Spring Security |br|
  See :ref:`newIa-engine-saml2-configuration` and :ref:`newIa-crafter-studio-configure-studio-saml` for more information.

* The property ``studio.cache.assets.maxAge`` in the Studio configuration file is changed from minutes to seconds |br|

  .. code-block:: yaml

     ##################################################
     ##                    Cache                     ##
     ##################################################
     ...
     # The max age in seconds that the browser should cache responses for requests matching `studio.cache.assets.maxAge.includeUrls`
     studio.cache.assets.maxAge: 3600
     # The urls that should include max-age=<studio.cache.assets.maxAge> in Cache-Control header. Other urls will be set to default max-age=0, must-revalidate
     studio.cache.assets.maxAge.includeUrls: /static-assets/**,/1/plugin/file/**
     ...

* Added support for previewing PDF assets in Studio  |br|
  See `here <https://github.com/craftercms/craftercms/issues/5735>`__ for more information

* Updated Group management dashboard to sort groups alphabetically |br|
  See `here <https://github.com/craftercms/craftercms/issues/5742>`__ for more information

* Updated Moment Timezone library  |br|
  See `here <https://github.com/craftercms/craftercms/issues/5855>`__ for more information

* Added support for sorting assets by Name/Recently uploaded  |br|
  See `here <https://github.com/craftercms/craftercms/issues/5879>`__ for more information

* Fixed issue with image cropper for existing images |br|
  See `here <https://github.com/craftercms/craftercms/issues/5889>`__ for more information+

* Fixed issue with session inactivity timeout |br|
  See `here <https://github.com/craftercms/craftercms/issues/5891>`__ for more information

  For more information on session timeouts, see :ref:`newIa-changing-session-timeout`

* Improved logging for script not found errors |br|
  See `here <https://github.com/craftercms/craftercms/issues/5904>`__ for more information

Lots of other small enhancements and bug fixes :)

For a full list of tickets, please visit: `GitHub 4.0.3 Milestone <https://github.com/craftercms/craftercms/milestone/91?closed=1>`_

For information on upgrading 3.1.x sites, see :ref:`here <newIa-compatibility-with-3.1.x>`

.. important::

    Please see :ref:`Breaking changes <newIa-breaking-changes-4-0-3>` for breaking changes and other
    things to consider before upgrading

    Please see :ref:`Breaking changes <newIa-breaking-changes-4-0-0>` for breaking changes and other
    things to consider before upgrading

    For instructions on how to update your CrafterCMS install to 4.0.0 (applies to 4.0.2),
    please see :ref:`newIa-upgrading-craftercms`

    When using private key SSH authentication in the ``init-site.sh`` script, the private key path must be set explicitly. |br|
    Please see :ref:`newIa-setup-project-for-delivery` for more information on using the ``-k`` option of ``init-site.sh`` to
    set the private key path

    For Linux installs, the Studio upgrade requires the library ``libaio`` which is not installed
    by default in some Linux distributions.  Please see the section on **Linux Prerequisites**
    in :ref:`newIa-linux-prerequisites` for instructions on how to install the library ``libaio``

|
|

.. raw:: html

   <hr>

